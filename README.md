현재 해야할것 (2021.05.30)

1. 채팅이 넘어오면 답을 확인할것
2. 게임시작을 서버에서 지시할것
.
.
.



## 노래맞추기

현재 제작중...

스타크래프트 노래맞추기 유즈맵을 보고 만들고 싶었어
앱으로도 제작하고싶은데

여긴 사지방이네

아무튼
어디서든 이 게임이 하고싶었다.

안되긴 하지만, 앱으로 만들면 컴퓨터로 못하고
컴퓨터 프로그램으로 만들면 폰으로 못하고

그래서 난 웹을 선택했다.

거의 모든 기기에 웹브라우저는 있고, 이걸 이용해서 
어디서든 하게 만들고 싶었다.

웹을 하는 김에 React도 한번 공부해보자 해서
리액트로 만들기로 했다.

지금은 제작기를 여기 쓰지만, 다 완성이 되고 나면 
[내 블로그](https://bini59.github.io/)에 옮길 예정이다.

### 9일차

이제 채팅을 구현할 차례이다.

먼저 socket.io를 찾아봤다. 구현하는거 자체는 쉬워서 그냥 뚝딱 만들었다.

여러가지 고난을 겪기는 했지만..
아무튼 만들고 나니
아무리 해도 게임화면에서 채팅이 업데이트가 안되는 것이다.

채팅을 state로 두고 갱신했는데,
useEffect에 dependency로 채팅을 두고 하니 무한루프가 걸려버리고,
안두자니 갱신이 안되고 너무 화가 났다.

한 4시간쯤 고민을 하다가 그냥 
getElementById로 직접 채팅을 넣어주기로 했다.

뭔가 할 수 있을거 같은데, 그냥 포기했다.

언젠가 알지 않을까

저 과정을 거치면서 
리액트가 어떻게 렌더링되고, 언제 업데이트되고, 등을 자세히 알게 된듯하다.

이제 리액트가 처음부터 끝까지 어떻게 mount되고 unmouont되는지
확실하게 이해한거 같다.

솔직히 처음엔 저렇게 말하는데 무슨소린가 했는데.. ㅋㅋㅋ

아무튼 그래서 이제 채팅도 구현했고,
방마다 다른 채팅방을 만들기 위해서 방도 만들어 줬다.

### 8일차

어제 연등 끝나고 자려고 하는데 문득 떠올랐다.
그럼 그냥 방을 만들면 이동하지 말고 메인화면에 두고 들어가자.

그래서 그냥 메인화면에 두었다.

그러니 해결이 되더라

어제와 오늘 저걸 열심히 만들면서 
React가 렌더링 되는 순서(lifeCycle)을 진짜 죽어라 봤다.

머리로는 이해했다고 했는데, 역시 해봐야 아는거 같다.
삽질 좀 하다보니 드디어 이해를 했다.


### 7일차

이제 프론트도 다 했겠다.

다음으로 서버를 만들기로 했다.

처음으로 할거는 일단 방을 만들고, 방을 불러오는것

메인화면에 있던 방만들기 버튼을 서버와 연결했다.
정말 오류가 많이 떳다. CORS오류, gitpod으로 개발 중이다보니, 서버를 열어주지 않았던 오류(이거 찾느라 3시간 걸렸다.)

아무튼 이런 오류 이후 방을 만들고, 방을 받고 참 힘들었다.

방을 만들고 바로 게임화면으로 이동하기를 했는데, 처음 렌더링할때 방을 불러와서 그 방을 적용시켜줘야하는데

componentWillMount 함수가 없더라 열심히 찾아봤는데 없었다. 너무 화나서 

이날 안에 다 완성하지 못했다.

### 6일차 

만들다 보니 의문이 생겼다.
나는 이때까지 메인화면과 게임화면을 따로따로 분리해서 
각각 리액트 프로젝트를 생성해서 만들고 있었다.

근데 생각해보니, 이렇게 불편한데 누군가는 이걸 이어주는걸 만들지 않았을까...

찾아보니 있었다.ㅋㅋㅋ

React-Router 이걸 이용해서 두 프로젝트를 합쳤다.


또, 게임화면과 메인화면에서 각각 방의 상태를 공유해야 편할거같다고 깨달았다.

이런 기능을 또 도와주는게 있었는데...
바로 redux였다.

근데 이 redux를 사용하려면 꼭꼭꼭 function문법으로 리액트를 작성해야한다는 것이다...
와 너무 화가 나더라.

큰일이다.. 이때까지 리액트를 다 class 문법으로 제작했었다.

일단 전부 funciton문법으로 다시 작성했다.

사실 어렵지는 않더라.

그냥 state는 usestate로 옮기고
함수는 그냥 쓰면되고,
render함수를 그냥 return으로 바꿔줬다.

간-단

근데 redux는 간단하지 않더라

아무튼 redux를 이용해서 각각 방의 상태를 공유하게 만들었다.

방을 만들면 그 즉시 메인화면에서 갱신해서 방을 불러온다.

### 5일차

드디어 기능들을 다 만들었다.

임시로 버튼을 둬서,
게임시작하는 기능을 만들었고

채팅로그를 표시하기 위해서 따로 로그도 기록했다.

### 4일차

프론트에서 실행되는 기능들을 만들었다.

타이머가 돌아가고, 타이머의 시간이 되면 힌트, 답을 표시하고

스코어보드를 갱신하고,
방을 만들고, 방을 들어가고.

등등 기능들을 제작했다.


### 3일차

메인화면 디자인 하는데 벽을 느꼈다.

친구 중에 미술하는 친구가 있어서 부탁했다.

걔한테 맡기니까 뚝딱 나오더라

너무 맘에들어서 그냥 그걸로 다 바꿨다.

### 2일차

근데 생각해보니, 이거 스타크래프트를 보고 만든거였다.

보다보니 그냥 스타크래프트처럼 하는게 좀 더 
친숙하고, 재미를 느낄 수 있을거 같더라

그래서 그냥 스타크래프트처럼 게임화면을 구상했다.

까만 화면에, 문제뜨고 힌트 뜨고 점수 왼쪽위에 보이고 뭐 이런거만

css작업을 하는데 너무 화가나서
찾아보니 sass라는게 있었다.

사용해보니 너무 편했다. 코드 길이도 대폭 줄었고,
좀 더 알아보기가 쉽다.


### 1일차

리액트 공부부터가 고난이다.

리액트가 사실 뭔지 잘 모르겠다.

왜 이게 계속 화면이 바뀌는지, 저 숫자들은 어떻게 바뀌는건지..

일단 그래도 화면을 구성했다.

메인화면은 간단하게 흰 바탕에 제목 크게 딱 띄우고
밑에 버튼 두개 두고 누르면 방 만들고, 방으로 이동하고

게임화면은 채팅창은 오른쪽에, 게임화면은 왼쪽에 너비를 7:3정도로 둬서
만들었었다.

버튼도 눌러보고..
열심히 css와 JSX로 만들었다.



(사진이 다날아 갔네... 나중에 추가해야지..)



