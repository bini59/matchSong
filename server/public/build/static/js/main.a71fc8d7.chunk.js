(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),o=n(24),i=n.n(o),r=n(7),a=(n(62),n(26)),l=n(51),j=n.n(l),u=Object(a.b)({name:"room",initialState:{rooms:[]},reducers:{changeRoom:function(e,t){var n=e.rooms.findIndex((function(e){return e.title===t.payload.title}));e.rooms[n]=t.payload.room},changeRooms:function(e,t){e.rooms=t.payload}}}),d=u.actions,m=d.changeRoom,b=d.changeRooms,O=function(e){return e.rooms.rooms},f=u.reducer,h=Object(a.a)({reducer:{rooms:f},middleware:function(e){return e().concat(j.a)}}),x=n(17),p=n(3),g=n(4),N=n(33),v=n.n(N),k=n(52),S=n(1),y=function(e){var t=Object(r.b)(),n=Object(c.useState)(""),s=Object(g.a)(n,2),o=s[0],i=s[1],a=[Object(c.useRef)(),Object(c.useRef)()],l=Object(c.useState)(""),j=Object(g.a)(l,2),u=j[0],d=j[1],m=function(){var e=Object(k.a)(v.a.mark((function e(t){var n,c,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://3001-orange-vicuna-9uo5wxk0.ws-us08.gitpod.io/room/genres",n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)},e.next=4,fetch("https://3001-orange-vicuna-9uo5wxk0.ws-us08.gitpod.io/room/genres",n);case 4:return c=e.sent,e.next=7,c.json();case 7:s=e.sent,o=JSON.parse(s).genre,d(O.map((function(e,t){return Object(S.jsxs)("div",{className:"genreSel",children:[Object(S.jsxs)("span",{className:"genreName",children:[e," : "]}),Object(S.jsx)("input",{className:"genreInput",id:e}),Object(S.jsxs)("span",{children:[" (max : ",o[t],")"]})]},t)})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=["JPOP","\uc560\ub2c8(\ub178\ub798\uc774\ub984)","\uc560\ub2c8(\uc560\ub2c8\uc774\ub984)","\uce90\ub9ad\ud130\uc1a1(\uce90\ub9ad\ud130)","\uc5ec\ub3cc(~2020)"];Object(c.useEffect)((function(){m({genre:O})}),[]);var f={title:"",users:[],genre:[],songN:[0,0],Song:[]};return Object(S.jsxs)("div",{className:"selectMode",children:[Object(S.jsxs)("div",{className:"selSection",children:[Object(S.jsx)("span",{children:"\ubc29 \uc774\ub984 : "}),Object(S.jsx)("input",{className:"roomNo",type:"text",ref:a[0]})]}),Object(S.jsxs)("div",{className:"selSection",children:[Object(S.jsx)("span",{children:"\uc7a5\ub974"}),Object(S.jsx)("br",{}),u]}),Object(S.jsx)("button",{className:"deciBtn",id:"accept",onClick:function(){f.title=a[0].current.value;var n=0;O.map((function(e,t){f.genre.push(document.getElementsByClassName("genreInput")[t].value),""==f.genre[t]&&(f.genre[t]=0),n+=Math.ceil(f.genre[t])})),f.songN[1]=n,i(Object(S.jsxs)("div",{className:"checkMade",children:[Object(S.jsx)("span",{children:"\uc815\ub9d0\ub85c \uc0dd\uc131\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{className:"checkBtn",onClick:function(){!function(e){var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)};fetch("https://3001-orange-vicuna-9uo5wxk0.ws-us08.gitpod.io/room/add",n).then((function(e){return e.json()})).then((function(e){return t(b(JSON.parse(e).rooms))}))}(f),e.renewRooms(),i(""),e.closeWindow()},children:"\ud655\uc778"}),Object(S.jsx)("button",{className:"checkBtn",onClick:function(){i("")},children:"\ucde8\uc18c"})]}))},children:"\ud655\uc778"}),o,Object(S.jsx)("button",{className:"deciBtn",onClick:function(){e.closeWindow()},children:"\ucde8\uc18c"})]})},w=(n(65),n(66),["JPOP","\uc560\ub2c8(\ub178\ub798\uc774\ub984)","\uc560\ub2c8(\uc560\ub2c8\uc774\ub984)","\uce90\ub9ad\ud130\uc1a1(\uce90\ub9ad\ud130)","\uc5ec\ub3cc(~2020)"]),E=function(e){var t=Object(r.b)(),n=Object(r.c)(O);Object(c.useEffect)((function(){var e={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})};fetch("https://3001-orange-vicuna-9uo5wxk0.ws-us08.gitpod.io/room",e).then((function(e){return e.json()})).then((function(e){return t(b(JSON.parse(e).rooms))}))}),[t]);var s=Object(c.useState)(!1),o=Object(g.a)(s,2),i=o[0],a=o[1],l=function(e){return e.map((function(t){var n={pathname:"/game/"+t.title,state:{rooms:e}};return Object(S.jsx)("li",{className:"roomli",children:Object(S.jsx)(x.b,{to:n,children:Object(S.jsxs)("div",{className:"room",children:[Object(S.jsx)("div",{className:"title",children:t.title}),Object(S.jsxs)("div",{className:"genre",children:["[",t.genre.map((function(e,t){return Object(S.jsxs)("span",{children:[e>0?w[t]+",":""," "]},t)})),"]"]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"users",children:t.users.map((function(e){return"\u133f"}))}),Object(S.jsxs)("div",{className:"remainsong",children:[t.songN[1]-t.songN[0],"/",t.songN[1]]})]})})},t.title)}))};return Object(S.jsxs)("div",{className:"main",children:[Object(S.jsx)("div",{id:"mainTitle",children:Object(S.jsx)("span",{children:"\ub178\ub798 \ub9de\ucd94\uae30"})}),Object(S.jsx)("div",{className:"roomlist",children:Object(S.jsxs)("ul",{children:[l(n),Object(S.jsx)("li",{className:"roomli",onClick:function(){a(!0)},children:Object(S.jsx)("div",{className:"addroom",children:"+"})})]})}),Object(S.jsx)("br",{}),i?Object(S.jsx)(y,{closeWindow:function(){a(!1)},renewRooms:function(){l(n)}}):""]})},T=function(e){var t=Object(c.useState)(5e3),n=Object(g.a)(t,2),s=n[0],o=n[1],i=e.idx,r=e.rooms;return Object(c.useEffect)((function(){o(r[i].Song[r[i].songN[0]].duration)}),[e.onTimer]),Object(c.useEffect)((function(){if(e.onTimer){var t=setInterval((function(){s>0?o(s-1):clearInterval(t)}),1e3);return function(){clearInterval(t)}}})),s},M=n(53),C=n.n(M),P=n(54),B=n.n(P),H=function(e){var t=Object(c.useState)(0),n=Object(g.a)(t,2),s=n[0],o=n[1],i=Object(c.useState)([]),r=Object(g.a)(i,2),a=r[0],l=r[1];return Object(c.useEffect)((function(){o(0)}),[e.hints]),Object(c.useEffect)((function(){e.sec===e.hints[s].time&&(l((function(){return a.push(Object(S.jsxs)("div",{children:[Object(S.jsxs)("span",{className:"hintMsg",children:[e.hints[s].category," : "]}),Object(S.jsx)("span",{children:e.hints[s].context})]},e.hints[s].context)),a})),s<e.hints.length-1&&o(s+1))}),[e.sec,a,s,e.hints]),a},I=n(5),J=n.n(I),L=function(e){var t=Object(r.c)(O)[e.idx].users.slice(0).sort((function(e,t){return t.score-e.score}));return Object(S.jsx)("div",{className:"scoreBoard",children:Object(S.jsx)("ul",{className:"li",children:t.map((function(e){return Object(S.jsxs)("li",{className:"Scoreli",children:[Object(S.jsx)("div",{className:"scoreColor",style:{backgroundColor:e.color}}),Object(S.jsxs)("div",{className:"score",children:[" ",e.score]})]},e.nickname)}))})})},R=function(e){var t=Object(c.useRef)();Object(c.useEffect)((function(){console.log(e),J()("#totalUsr")[0].innerHTML=e.room[e.idx].users.length,e.socket.off("skipped"),e.socket.on("skipped",(function(t){J()(".chat")[0].innerHTML+='<span><span style="color:red">!</span> \uc2a4\ud0b5\ud558\uc168\uc2b5\ub2c8\ub2e4</span></br>',J()(".chat")[0].scrollTop=J()(".chat")[0].scrollHeight,e.timerOff(),e.user.roomMaster&&e.socket.emit("req-start-game",{title:e.room[e.idx].title,idx:e.idx,first:0})}))}),[e.room]),Object(c.useEffect)((function(){e.socket.on("notice-skip",(function(e){console.log(J()("#skipProgress")),J()("#skipProgress")[0].innerHTML=e.num}))}),[]);var n=function(){e.socket.emit("vote-skip",{user:e.user,title:e.title,idx:e.idx})};return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"chat",style:{overflow:"auto"},ref:t}),Object(S.jsx)("input",{className:"input",type:"text",onKeyDown:function(t){"Enter"===t.key?function(){var t=document.getElementsByClassName("input")[0];e.socket.emit("send-chat",{user:e.user,chat:t.value,title:e.title,idx:e.idx}),t.value=""}():!0===t.ctrlKey&&"Slash"===t.code&&n()}}),Object(S.jsx)("button",{className:"skipBtn",onClick:function(){n()},children:"\uc2a4\ud0b5"}),Object(S.jsxs)("div",{className:"skip",children:["\uc2a4\ud0b5\uc5d0 \ud22c\ud45c\ud558\uc2dc\ub824\uba74 ctrl+/\ub97c \ub204\ub974\uc138\uc694 ( ",Object(S.jsx)("span",{id:"skipProgress",children:"0"})," / ",Object(S.jsx)("span",{id:"totalUsr"})," )"]})]})},F=function(e){var t=Object(r.b)(),n=Object(c.useState)({nickname:"NONE",color:"red",score:0,roomMaster:!0}),s=Object(g.a)(n,2),o=s[0],i=s[1],a=e.rooms,l=e.idx,j=Object(c.useState)(!1),u=Object(g.a)(j,2),d=u[0],b=u[1],O=Object(c.useState)(""),f=Object(g.a)(O,2),h=f[0],p=f[1];Object(c.useEffect)((function(){e.socket.emit("join-room",{title:a[l].title}),e.socket.on("correct",(function(n){e.correct(),J()(".chat")[0].innerHTML+='<span><span style="color : '.concat(n.user.color,'; font-weigth:bold">').concat(n.user.nickname,"</span><span> \uc815\ub2f5\uc785\ub2c8\ub2e4</span></span></br>"),J()(".chat")[0].scrollTop=J()(".chat")[0].scrollHeight,t(m({title:a[l].title,room:n.room}))}))}),[]),Object(c.useEffect)((function(){e.socket.off("res-add-user"),e.socket.on("res-add-user",(function(e){t(m({title:a[l].title,room:e})),e.users[e.users.length-1].nickname===h&&i(e.users[e.users.length-1])}))}),[h]),Object(c.useEffect)((function(){e.socket.on("remove-user",(function(e){t(m({title:a[l].title,room:e}))})),e.socket.on("receive-chat",(function(e){J()(".chat")[0].innerHTML+='\n                <span className="chatMsg">\n                    <span style="color : '.concat(e.user.color,'">\n                        ').concat(e.user.nickname,"\n                    </span> \n                    : ").concat(e.chat,"<br/>\n                </span>\n            "),J()(".chat")[0].scrollTop=J()(".chat")[0].scrollHeight})),e.socket.on("end-game",(function(e){t(m({title:a[l].title,room:e.room}))}))}),[]),Object(c.useEffect)((function(){if(d){var t=J()("#newNickname")[0].value;return p(t),""!==t&&e.socket.emit("req-add-user",{room:a[l],username:t}),function(){e.socket.emit("remove-user",{room:a[l],username:t}),e.socket.disconnect()}}}),[d]),Object(c.useEffect)((function(){e.socket.off("res-start-game"),e.socket.on("res-start-game",(function(t){e.FuncstartGame(a[l])}))}),[a]),Object(c.useEffect)((function(){0===e.time&&o.roomMaster&&e.socket.emit("req-start-game",{title:a[l].title,idx:l,first:0})}),[e.time]);var N=Object(S.jsxs)("div",{className:"addUsr",children:[Object(S.jsx)("span",{className:"nameInfo",children:"\ub2c9\ub124\uc784 \uc785\ub825"}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"text",id:"newNickname"}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{className:"nameOk",onClick:function(){b(!0)},children:"\ud655\uc778"})]});return Object(S.jsxs)("div",{className:"chatBox",children:[Object(S.jsx)(L,{idx:l}),Object(S.jsxs)("div",{className:"chatBtn",children:[o.roomMaster?Object(S.jsx)("button",{className:"gameStart",onClick:function(){e.startGame()},children:"\uac8c\uc784 \uc2dc\uc791"}):"",Object(S.jsx)(x.b,{to:"/",children:Object(S.jsx)("button",{className:"gameExit",onClick:function(){e.socket.emit("remove-user",{room:a[l],username:h}),e.socket.disconnect()},children:"\ub098\uac00\uae30"})})]}),"NONE"===o.nickname?N:"",Object(S.jsx)("div",{children:Object(S.jsx)(R,{socket:e.socket,user:o,idx:l,room:a,title:a[l].title,timerOff:function(){e.timerOff(),e.correct()}})})]})},q=(n(98),n(99),function(e){var t=Object(p.f)().id,n=Object(c.useState)(null),s=Object(g.a)(n,2),o=s[0],i=s[1];Object(c.useEffect)((function(){i(C.a.connect("https://3001-orange-vicuna-9uo5wxk0.ws-us08.gitpod.io/"))}),[]),Object(c.useEffect)((function(){o&&o.on("notice-skip",(function(e){J()("#skipProgress")[0].innerHTML=e.num}))}),[]);var a=Object(r.c)(O),l=a.findIndex((function(e){return e.title===t})),j=Object(c.useState)(!1),u=Object(g.a)(j,2),d=u[0],m=u[1],b=Object(c.useState)(Object(S.jsxs)("div",{className:"ans",children:[Object(S.jsx)("span",{className:"ansMsg",children:"\ub2f5"})," : ",a[l].Song[a[l].songN[0]].title]})),f=Object(g.a)(b,2),h=f[0],x=f[1],N=Object(c.useState)(!1),v=Object(g.a)(N,2),k=v[0],y=v[1],w=T({onTimer:k,idx:l,rooms:a});return Object(S.jsxs)("div",{className:"quiz",children:[Object(S.jsxs)("div",{className:"title",children:[Object(S.jsxs)("span",{className:"remainSong",children:["\ub0a8\uc740\uace1 ( ",a[l].songN[1]-a[l].songN[0]," / ",a[l].songN[1]," )"]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{className:"description",children:[Object(S.jsx)("span",{className:"_1",children:"\uc74c\uc545"}),"\uc744 \ub4e3\uace0 ",Object(S.jsx)("span",{className:"_2",children:"\ub2f5"}),"\uc744 \uc785\ub825\ud558\uc138\uc694"]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{className:"remainSec",children:["- ",w,"\ucd08 -"]}),Object(S.jsx)("br",{}),Object(S.jsx)(B.a,{src:a[l].Song[a[l].songN[0]].url,id:"audio",type:"mpeg"})]}),Object(S.jsx)("div",{className:"hint",children:Object(S.jsx)(H,{sec:w,hints:a[l].Song[a[l].songN[0]].hint})}),d?h:Object(S.jsx)("div",{className:"ans"}),o?Object(S.jsx)(F,{socket:o,rooms:a,idx:l,time:w,correct:function(){m(!0)},startGame:function(){o.emit("req-start-game",{title:a[l].title,idx:l,first:-1})},FuncstartGame:function(e){!function(e){y(!1),m(!1),x(Object(S.jsxs)("div",{className:"ans",children:[Object(S.jsx)("span",{className:"ansMsg",children:"\ub2f5"})," : ",e.Song[e.songN[0]].title]})),J()(".hint")[0].innerHTML="",J()("#skipProgress")[0].innerHTML=0,y(!0),J()("#audio")[0].play()}(e)},timerOff:function(){y(!1)}}):""]})}),G=function(){return Object(S.jsx)(x.a,{children:Object(S.jsxs)(p.c,{children:[Object(S.jsx)(p.a,{exact:!0,path:"/",children:Object(S.jsx)(E,{})}),Object(S.jsx)(p.a,{path:"/game/:id",children:Object(S.jsx)(q,{})})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),o(e),i(e)}))};i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(r.a,{store:h,children:Object(S.jsx)(G,{})})}),document.getElementById("root")),A()},62:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.a71fc8d7.chunk.js.map